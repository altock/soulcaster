# ============================================================================
# Soulcaster Unified Environment Configuration
# ============================================================================
# Single .env file for BOTH backend and dashboard
# Copy this file to .env in the project root and fill in your values
# DO NOT commit .env with real credentials to version control

# ----------------------------------------------------------------------------
# ENVIRONMENT
# ----------------------------------------------------------------------------
# Set to "development" for local dev, "production" for prod deployments
# This is used by backend safety checks (e.g., reset_dev_data.py)
ENVIRONMENT=development

# Logging level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# ----------------------------------------------------------------------------
# UPSTASH REDIS (Primary Data Store) - REQUIRED
# ----------------------------------------------------------------------------
# Get from: https://console.upstash.com/redis
# IMPORTANT: Use DEV instance for local development
UPSTASH_REDIS_REST_URL=https://your-dev-redis.upstash.io
UPSTASH_REDIS_REST_TOKEN=your-dev-redis-token

# Alternative: Native Redis URL (not recommended for serverless)
# REDIS_URL=redis://default:password@your-instance.upstash.io:6379

# ----------------------------------------------------------------------------
# UPSTASH VECTOR (Embeddings & Clustering) - REQUIRED
# ----------------------------------------------------------------------------
# Get from: https://console.upstash.com/vector
# IMPORTANT: Use DEV instance for local development
UPSTASH_VECTOR_REST_URL=https://your-dev-vector.upstash.io
UPSTASH_VECTOR_REST_TOKEN=your-dev-vector-token

# ----------------------------------------------------------------------------
# GOOGLE GEMINI (LLM & Embeddings) - REQUIRED
# ----------------------------------------------------------------------------
# Get from: https://makersuite.google.com/app/apikey
# Used for: embeddings (gemini-embedding-001), summaries (gemini-2.5-flash)
GEMINI_API_KEY=your-gemini-api-key
GOOGLE_GENERATIVE_AI_API_KEY=your-gemini-api-key

# ----------------------------------------------------------------------------
# GITHUB OAUTH (Dashboard Authentication) - REQUIRED
# ----------------------------------------------------------------------------
# Create OAuth app at: https://github.com/settings/developers
# Authorization callback URL: http://localhost:3000/api/auth/callback/github
# Scopes needed: repo, read:user
#
# How it works:
# - Users sign in via GitHub OAuth
# - Access token stored in encrypted NextAuth session
# - PRs created from user's account (@username), not a bot
GITHUB_ID=your-github-oauth-client-id
GITHUB_SECRET=your-github-oauth-client-secret

# GitHub Personal Access Token (for agent operations)
# Create at: https://github.com/settings/tokens
# Scopes needed: repo, read:user
GITHUB_TOKEN=ghp_your-personal-access-token

# ----------------------------------------------------------------------------
# NEXTAUTH (Dashboard Session Management) - REQUIRED
# ----------------------------------------------------------------------------
# Generate NEXTAUTH_SECRET with: openssl rand -base64 32
NEXTAUTH_URL=http://localhost:3000
NEXTAUTH_SECRET=your-nextauth-secret-here

# ----------------------------------------------------------------------------
# POSTGRESQL DATABASE (Dashboard User/Project Data) - REQUIRED
# ----------------------------------------------------------------------------
# Local development: Use local PostgreSQL or docker-compose
# Production: Use managed PostgreSQL (Neon, Supabase, Railway, etc.)
DATABASE_URL="postgresql://user:password@localhost:5432/soulcaster?schema=public"

# ----------------------------------------------------------------------------
# E2B SANDBOX (Coding Agent Runtime) - REQUIRED
# ----------------------------------------------------------------------------
# Get from: https://e2b.dev/dashboard
E2B_API_KEY=your-e2b-api-key

# E2B template name (custom sandbox image)
KILOCODE_TEMPLATE_NAME=kilo-sandbox-v-0-1-dev

# Coding agent runner type: "sandbox_kilo" (default) or "aws" (deprecated)
CODING_AGENT_RUNNER=sandbox_kilo

# ----------------------------------------------------------------------------
# VERCEL BLOB STORAGE (Job Log Archival) - REQUIRED
# ----------------------------------------------------------------------------
# Get from: https://vercel.com/dashboard/stores
# Logs buffered in memory during execution, archived to Blob on completion
BLOB_READ_WRITE_TOKEN=your-vercel-blob-token

# ----------------------------------------------------------------------------
# BACKEND URL (Inter-Service Communication)
# ----------------------------------------------------------------------------
# DEV: http://localhost:8000
# PROD: https://your-backend.sevalla.app or Vercel URL
BACKEND_URL=http://localhost:8000

# ----------------------------------------------------------------------------
# GIT CONFIGURATION (Coding Agent Commits)
# ----------------------------------------------------------------------------
GIT_USER_EMAIL=soulcaster-bot@example.com
GIT_USER_NAME="Soulcaster Bot"

# ----------------------------------------------------------------------------
# CORS SETTINGS (Backend)
# ----------------------------------------------------------------------------
# Comma-separated list of allowed origins
# DEV: http://localhost:3000
# PROD: https://your-dashboard.vercel.app
ALLOWED_ORIGINS=http://localhost:3000

# ----------------------------------------------------------------------------
# OPTIONAL: Reddit Ingestion
# ----------------------------------------------------------------------------
# Comma-separated list of subreddits to monitor
# REDDIT_SUBREDDITS=claudeai,programming
# REDDIT_SORTS=new
# REDDIT_POLL_INTERVAL_SECONDS=300

# ----------------------------------------------------------------------------
# OPTIONAL: AWS ECS (Deprecated - use E2B instead)
# ----------------------------------------------------------------------------
# AWS_ACCESS_KEY_ID=your-aws-access-key
# AWS_SECRET_ACCESS_KEY=your-aws-secret-key
# AWS_REGION=us-east-1
# ECS_CLUSTER_NAME=soulcaster-cluster
# ECS_TASK_DEFINITION=soulcaster-agent
# ECS_SUBNET_ID=subnet-xxxxx
# ECS_SECURITY_GROUP_ID=sg-xxxxx

# ----------------------------------------------------------------------------
# OPTIONAL: Sentry Error Tracking
# ----------------------------------------------------------------------------
# SENTRY_DSN=https://your-sentry-dsn@sentry.io/project-id
